# Attendance Hub - UI/デザイン監査レポート

## 調査日時
2025-11-19

## 調査範囲
- app/ディレクトリ内の全ページコンポーネント（11ページ）
- components/ディレクトリ内の再利用可能コンポーネント（7コンポーネント）
- Tailwind CSSの使用パターン
- globals.cssのカスタムスタイル

## 全体的な所見
- **デザイン統一性**: 中程度 - 基本的な配色・スペーシングは統一的だが、パターンの使い分けに不一貫性がある
- **ユーザビリティ**: 良好 - 基本的な操作は直感的で、アクセシビリティも実装されている
- **視覚的階層**: 改善の余地あり - 見出しやセクション区分が改善の対象
- **レスポンシブ性**: 良好 - sm:、md:、lg:ブレークポイントが適切に使用されている

## 発見事項

### 1. 一貫性の問題

#### 1.1 ボタンスタイルの不一貫性
**問題**:
- 主要アクションボタン: `bg-blue-600 text-white rounded-md/lg font-medium hover:bg-blue-700`
- 二次ボタン: `bg-gray-100 text-gray-700 rounded-md border border-gray-300 hover:bg-gray-200`
- テキストリンクボタン: `text-blue-600 hover:text-blue-700 text-sm font-medium`
- 大型CTAボタン: `px-6 py-3 bg-blue-600 rounded-lg` など

**影響範囲**:
- app/page.tsx (団体作成ボタン)
- app/[org]/page.tsx (イベント日付登録ボタン)
- app/[org]/events/[id]/register/page.tsx (出欠ステータス選択ボタン)
- app/[org]/my-register/page.tsx (登録ボタン)

**改善提案**: ボタンサイズ・スタイルの統一 - primary/secondary/tertiary の3パターンに統一

#### 1.2 カード・コンテナの違い
**問題**:
- 白背景: `bg-white rounded-lg shadow-sm p-4 sm:p-6`
- グレー背景: `bg-gray-50` など様々
- シャドウ: `shadow-sm`, `shadow` 混在

**改善提案**: 階層的なコンテナパターンの標準化

#### 1.3 テキスト色の統一性
**問題**:
- CLAUDE.md で `text-gray-900 placeholder:text-gray-400` の使用が必須とされているが、
  すべての入力欄で完全に一貫しているかは検証が必要
- 例: 一部の入力欄で `text-gray-900` が含まれていない可能性

**検証済み**:
- app/page.tsx: ✓ 統一されている
- app/[org]/admin/groups/page.tsx: ✓ 統一されている
- app/[org]/events/[id]/register/page.tsx: ✓ 統一されている

### 2. ユーザビリティの問題

#### 2.1 ボタンの視認性と識別性
**問題**:
- 「編集」「削除」ボタン (admin/groups, admin/events):
  - `px-3 py-1 text-sm text-blue-600/red-600 hover:bg-blue-50/red-50`
  - テキストのみで、背景色がないため視認性が低い
  - ホバー時の視覚的フィードバックも弱い

**該当ページ**:
- app/[org]/admin/groups/page.tsx (line 279-287)
- app/[org]/admin/events/page.tsx (line 320-331)

**改善提案**: 背景色を追加、またはアイコンの使用で識別性向上

#### 2.2 出欠ステータスボタンの分かりやすさ
**問題**:
- app/[org]/events/[id]/register/page.tsx で出欠選択ボタンは良好だが、
  体験の一貫性のため、他のページでも同じパターンを使用すべき

**改善提案**: このパターンを一括登録ページでも検討

#### 2.3 フォーム入力時のフィードバック
**問題**:
- エラーメッセージはあるが、成功メッセージの表示パターンが異なる
- メッセージのカラースキーム: `bg-red-50 text-red-600` など統一的だが、
  アイコンがない

**改善提案**: アイコン（チェックマーク、警告マーク等）の追加

### 3. 視覚的階層の問題

#### 3.1 見出しの階層が不明確な箇所
**問題**:
- h1: `text-3xl sm:text-4xl` vs `text-2xl sm:text-3xl` が混在
- h2: `text-lg sm:text-xl` vs `text-xl sm:text-2xl` が混在
- h3: `text-lg font-bold` vs `text-sm font-semibold` が不一貫

**該当ページ**:
- app/page.tsx: h1 = `text-3xl sm:text-4xl`
- app/[org]/page.tsx: h1 = `text-2xl sm:text-3xl`
- app/[org]/guide/page.tsx: h1 = `text-3xl`, h2 = `text-2xl`, h3 = `text-lg`

**改善提案**: 全体的な見出しサイズ体系の定義と統一

#### 3.2 セクション区分の視覚的な違い
**問題**:
- 背景色による区分: bg-white, bg-gray-50 が混在
- 枠線: border-gray-200 が一般的だが、視覚的な強調がない
- パディング: p-4 sm:p-6 が基本だが、大規模セクションではばらつき

**改善提案**: 
- セクション間のパディングを明示的に定義
- セクションごとに異なる背景色（白 vs グレー）の使い分けルール明示

#### 3.3 ナビゲーション部分の扱い
**問題**:
- 戻るリンク: `text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1`
- 位置: すべてのページで上部に一貫している（良好）
- ただし、視認性をもっと高められる余地あり

**改善提案**: アイコンを活用、または別色系（グレー）の使用で区別

### 4. 空白スペース（ホワイトスペース）の活用

#### 4.1 セクション間のマージン
**問題**:
- `mb-6 sm:mb-8`: 基本的に統一されているが、
- コンテナ内: `space-y-4`, `space-y-5`, `space-y-6` が混在
- フォーム: `space-y-4` が多いが、大型フォームでは `space-y-5`

**改善提案**: スペーシングスケールの標準化（4, 6, 8）

#### 4.2 縦方向の余白
**問題**:
- ページトップのパディング: `py-4 sm:py-8` (my-register) vs `py-8` (guide)
- コンテナのパディング: `p-4 sm:p-6` が基本だが、一部で不一貫

**改善提案**: 標準パディング値の定義

### 5. モダンなデザイントレンドとの比較

#### 5.1 グラデーション・複雑な視覚効果の欠如
**現状**: シンプルなフラットデザイン - 適切

#### 5.2 マイクロインタラクション
**問題**:
- `transition-colors` は使用されているが、`transition-all` や詳細な遷移がない
- ホバー時のシャドウ変化: `hover:shadow-md` は一部ページのみ

**改善提案**:
- 重要なインタラクション（ボタン、カード）にシャドウ変化を追加
- スムーズなトランジション時間の統一（200ms推奨）

#### 5.3 暗黒モード対応
**現状**: CSS変数で基本的なサポート（--background, --foreground）はあるが、
詳細な実装は不完全。Tailwindの暗黒モード対応を活用する余地あり

**改善提案**: `dark:` プレフィックスの活用で完全なダークモード対応

### 6. アクセシビリティ

#### 6.1 フォーカス表示
**現状**: `focus:outline-none focus:ring-2 focus:ring-blue-500` で基本的に実装されている
**評価**: 良好

#### 6.2 フォーム関連
**問題**:
- `aria-label` が一部入力要素に不足
- `role="status"` の実装: app/[org]/page.tsx では良好だが、他のページで散見されない

**改善提案**:
- `aria-label` を全入力要素に追加
- メッセージ表示時に `role="alert"` 属性の使用

#### 6.3 カラーコントラスト
**評価**: CLAUDE.md の指定に従い、`text-gray-900` + `placeholder:text-gray-400` で WCAG AA基準をクリア

### 7. レスポンシブデザイン

#### 7.1 ブレークポイント使用
**現状**: `sm:` (640px), `md:`, `lg:` (1024px) が使用されている
**評価**: 良好 - 主要な画面幅で対応

#### 7.2 スマートフォン優先設計
**現状**: ほぼ実装されており、パディングやフォントサイズがモバイル優先
**評価**: 良好

### 8. パフォーマンスへの影響

#### 8.1 Tailwind CSSの使用効率
**問題**: クラス名が長くなっており、HTML が冗長
```
className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 placeholder:text-gray-400"
```
**改善提案**: `@apply` ディレクティブで共通スタイルの抽出

#### 8.2 カスタムコンポーネント
**現状**: 基本的なコンポーネントのみ（LoadingSpinner, Skeleton）
**提案**: Button, Input, Card などの再利用可能コンポーネント化

## ページ別詳細分析

### app/page.tsx（ホームページ）
- **配色**: グレースケール中心（グレー/ホワイト）
- **レイアウト**: センタレイアウト、max-w-md
- **問題**: 団体作成フォームと成功表示の文言量が多い → スクロールが必要になる可能性
- **改善提案**: セクションの圧縮、不要な説明文の削減

### app/[org]/page.tsx（イベント一覧）
- **強み**: イベント項目のカード design が良好（hover:border-blue-300）
- **問題**: ナビゲーション（一括登録、管理画面へのリンク）がテキストリンク → 視認性を改善したい
- **改善提案**: ボタンスタイルへの変更、または小型カード化

### app/[org]/admin/page.tsx（管理画面）
- **強み**: 管理ページへのカード型ナビゲーション（bg-white hover:shadow-md）
- **問題**: なし - デザインは良好
- **評価**: ★★★★★

### app/[org]/admin/groups/page.tsx（グループ管理）
- **問題**: 編集・削除ボタンの視認性（テキストのみ）
- **改善提案**: アイコンボタン化、またはより目立つ背景色

### app/[org]/admin/events/page.tsx（イベント管理）
- **問題**: グループ管理と同様、編集・削除ボタン
- **改善提案**: 統一されたボタンコンポーネント化

### app/[org]/events/[id]/page.tsx（イベント詳細）
- **強み**: グループ別アコーディオンの実装が良好
- **問題**: なし - 全体的に設計が整っている
- **評価**: ★★★★☆

### app/[org]/events/[id]/register/page.tsx（出欠登録）
- **強み**: 出欠ステータスボタン（グリッド表示、色分け）の設計が素晴らしい
- **問題**: なし
- **評価**: ★★★★★

### app/[org]/my-register/page.tsx（一括登録）
- **問題**: 背景色が `bg-gray-50` だが、内側のコンポーネントが白 → 階層の区別が明確
- **評価**: ★★★★☆

### app/[org]/guide/page.tsx（ガイド）
- **強み**: 構造化されたコンテンツ、目次付き
- **問題**: テキスト量が多い → 読みやすさの工夫が必要
- **改善提案**: より視覚的な構成、ステップ数字の表示

### components（コンポーネント分析）

#### LoadingSpinner
- **設計**: シンプル、良好
- **問題**: なし

#### AttendanceFilters
- **設計**: flexbox で左寄せ → モバイルで折り返す際の工夫が必要
- **改善提案**: より小さなスクリーンでは縦に積み上げる

#### GroupAttendanceAccordion
- **強み**: アコーディオン矢印（▼▶）で状態を表現
- **改善提案**: アイコンの活用（例: ChevronDown SVG）

#### MemberSelector
- **設計**: 段階的な選択フロー - 良好

## 優先度別改善提案リスト

### 【高優先度】
1. **ボタンスタイルの統一化** - 視認性向上、ユーザーの操作判断が向上
   - primary button (青)
   - secondary button (グレー)
   - danger button (赤) - 削除時のみ
   - text button (リンク色)

2. **編集・削除ボタンの改善** - admin ページのUX向上
   - アイコン追加 (pencil, trash)
   - 背景色/枠線の明示化

3. **見出しサイズ体系の統一** - 視覚的階層の明確化
   - h1: `text-3xl sm:text-4xl font-bold`
   - h2: `text-xl sm:text-2xl font-bold`
   - h3: `text-lg font-semibold`

4. **共通コンポーネントの抽出** - 保守性向上
   - Button コンポーネント
   - Input コンポーネント
   - Card コンポーネント

### 【中優先度】
5. **マイクロインタラクションの強化**
   - ホバー時のシャドウ変化を統一
   - トランジション時間の明示（200ms推奨）

6. **スペーシング値の標準化**
   - セクション間: `gap-6`, `gap-8`
   - 内部: `space-y-4`, `space-y-6`

7. **ナビゲーション可視性向上**
   - 戻るリンク → グレー背景パネルに変更
   - またはアイコン（←）の追加

8. **フォーム周りのUX改善**
   - エラー・成功メッセージへのアイコン追加
   - 必須フィールド表示の統一（* 表記は既にあり）

### 【低優先度】
9. **ダークモード完全対応**
   - `dark:` プレフィックスの活用

10. **グラデーション・装飾的な視覚効果**
    - 現在のシンプル設計を維持するなら不要

## 推奨設計システム

### カラーパレット（既存を維持）
- Primary: `blue-600` (#2563eb)
- Secondary: `gray-600` (#4b5563)
- Success: `green-600` (#16a34a)
- Warning: `yellow-600` (#ca8a04)
- Danger: `red-600` (#dc2626)
- Neutral: `gray-*` シリーズ

### スペーシングスケール
- `gap-1`, `gap-2`, `gap-3`, `gap-4` (4px単位)
- セクション間: `gap-6` (24px), `gap-8` (32px)
- フォーム内: `space-y-4` (16px)

### フォントサイズ体系（既存を基礎に）
```
h1: text-3xl sm:text-4xl font-bold
h2: text-xl sm:text-2xl font-bold
h3: text-lg font-semibold
body: text-sm sm:text-base
small: text-xs
```

### シャドウ・ボーダーラディウス
- 標準: `rounded-md` (6px)
- 大型: `rounded-lg` (8px)
- シャドウ: `shadow-sm` (基本), `shadow-md` (hover時)

## テスト・検証項目

### ビジュアルテスト
- [ ] 全ページをlightモードで確認
- [ ] 全ページをダークモードで確認
- [ ] モバイル (320px), タブレット (768px), デスクトップ (1440px) で確認

### ユーザビリティテスト
- [ ] ボタンの視認性（目視確認）
- [ ] フォーム入力時のフィードバック
- [ ] エラーメッセージの明確性

### アクセシビリティテスト
- [ ] スクリーンリーダーでの動作確認
- [ ] キーボード操作での操作確認
- [ ] WCAG 2.1 AA 準拠確認

## 参考

- CLAUDE.md: 入力欄の視認性に関する記載確認済み
- 既存テスト: 485+ テスト実装済み
- Tailwind CSS: v3.4 (カスタム設定なし)
