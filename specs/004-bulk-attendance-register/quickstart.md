# Quickstart: è¤‡æ•°ã‚¤ãƒ™ãƒ³ãƒˆä¸€æ‹¬å‡ºæ¬ ç™»éŒ²

**Feature**: 004-bulk-attendance-register
**Date**: 2025-11-08
**Purpose**: é–‹ç™ºè€…å‘ã‘ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ»é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆæ‰‹é †

---

## Overview

æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€è¤‡æ•°ã‚¤ãƒ™ãƒ³ãƒˆä¸€æ‹¬å‡ºæ¬ ç™»éŒ²æ©Ÿèƒ½ã‚’é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã®æ‰‹é †ã‚’è¨˜è¼‰ã™ã‚‹ã€‚TDDï¼ˆãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼‰ã«åŸºã¥ãã€ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã§å®Ÿè£…ã‚’é€²ã‚ã‚‹ã€‚

---

## Prerequisitesï¼ˆå‰ææ¡ä»¶ï¼‰

- Node.js 20.xä»¥ä¸Š
- npm 10.xä»¥ä¸Š
- Git
- ã‚¨ãƒ‡ã‚£ã‚¿ï¼ˆVS Codeæ¨å¥¨ï¼‰

---

## 1. Setupï¼ˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼‰

### 1.1 ãƒ–ãƒ©ãƒ³ãƒãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ

```bash
# ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã«åˆ‡ã‚Šæ›¿ãˆ
git checkout 004-bulk-attendance-register

# æœ€æ–°ã®çŠ¶æ…‹ã‚’ç¢ºèª
git status
```

### 1.2 ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ—¢å­˜ã®package.jsonã‹ã‚‰ï¼‰
npm install

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
npm list --depth=0
```

**æœŸå¾…ã•ã‚Œã‚‹ä¸»è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸**:
- next: 16.0.1
- react: 19.2.0
- typescript: 5.9.3
- zod: 3.23.x
- jest: 29.x
- @testing-library/react: 14.x

### 1.3 é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆå‹•ä½œç¢ºèªï¼‰

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
npm run dev

# ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹: http://localhost:3000
# ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
```

---

## 2. Development Workflowï¼ˆé–‹ç™ºãƒ•ãƒ­ãƒ¼ï¼‰

### 2.1 TDDã‚µã‚¤ã‚¯ãƒ«ï¼ˆRed-Green-Refactorï¼‰

æœ¬ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ã¯t-wadaã®TDDåŸå‰‡ã«å¾“ã£ã¦é–‹ç™ºã™ã‚‹:

1. **Redï¼ˆå¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’æ›¸ãï¼‰**:
   - ã¾ãšã€æœŸå¾…ã™ã‚‹å‹•ä½œã‚’å®šç¾©ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’æ›¸ã
   - ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã€å¤±æ•—ã™ã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆå®Ÿè£…ãŒã¾ã ãªã„ãŸã‚ï¼‰

2. **Greenï¼ˆãƒ†ã‚¹ãƒˆã‚’é€šã™æœ€å°å®Ÿè£…ï¼‰**:
   - ãƒ†ã‚¹ãƒˆã‚’é€šã™ãŸã‚ã®æœ€å°é™ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
   - éå‰°ãªå®Ÿè£…ã¯ã—ãªã„ï¼ˆYAGNI: You Aren't Gonna Need Itï¼‰

3. **Refactorï¼ˆã‚³ãƒ¼ãƒ‰ã‚’æ•´ç†ï¼‰**:
   - ãƒ†ã‚¹ãƒˆãŒã‚°ãƒªãƒ¼ãƒ³ã®ã¾ã¾ã€ã‚³ãƒ¼ãƒ‰ã‚’æ”¹å–„
   - é‡è¤‡å‰Šé™¤ã€å‘½åæ”¹å–„ã€æ§‹é€ æœ€é©åŒ–

### 2.2 é–‹ç™ºé †åº

ä»¥ä¸‹ã®é †åºã§é–‹ç™ºã™ã‚‹ã“ã¨ã‚’æ¨å¥¨:

#### Phase A: ã‚µãƒ¼ãƒ“ã‚¹å±¤ï¼ˆãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼‰

1. **`upsertAttendance`ã®ãƒ†ã‚¹ãƒˆ â†’ å®Ÿè£…**
   - ãƒ•ã‚¡ã‚¤ãƒ«: `__tests__/lib/attendance-service.test.ts`
   - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹:
     - æ–°è¦ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ
     - æ—¢å­˜ãƒ¬ã‚³ãƒ¼ãƒ‰æ›´æ–°
     - é‡è¤‡ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
     - ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼

2. **`upsertBulkAttendances`ã®ãƒ†ã‚¹ãƒˆ â†’ å®Ÿè£…**
   - åŒã˜ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½åŠ 
   - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹:
     - å…¨ä»¶æˆåŠŸ
     - ä¸€éƒ¨æˆåŠŸãƒ»ä¸€éƒ¨å¤±æ•—
     - å…¨ä»¶å¤±æ•—
     - ç©ºé…åˆ—

#### Phase B: å‹å®šç¾©ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

3. **`types/index.ts`ã«æ–°è¦å‹è¿½åŠ **
   - `BulkAttendanceInput`
   - `BulkAttendanceResult`

4. **`lib/validation.ts`ã«Zodã‚¹ã‚­ãƒ¼ãƒè¿½åŠ **ï¼ˆæ—¢å­˜ã‚¹ã‚­ãƒ¼ãƒã‚’å†åˆ©ç”¨å¯èƒ½ãªå ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—ï¼‰

#### Phase C: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

5. **`components/bulk-register/member-selector.tsx`**
   - ãƒ†ã‚¹ãƒˆ: ã‚°ãƒ«ãƒ¼ãƒ—é¸æŠã€ãƒ¡ãƒ³ãƒãƒ¼é¸æŠã€æ–°è¦ãƒ¡ãƒ³ãƒãƒ¼ä½œæˆ
   - å®Ÿè£…: ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã€å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

6. **`components/bulk-register/event-list.tsx`**
   - ãƒ†ã‚¹ãƒˆ: ã‚¤ãƒ™ãƒ³ãƒˆè¡¨ç¤ºã€ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹é¸æŠ
   - å®Ÿè£…: ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ã®ãƒªã‚¹ãƒˆ

7. **`components/bulk-register/status-grid.tsx`**
   - ãƒ†ã‚¹ãƒˆ: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒœã‚¿ãƒ³ã€å€‹åˆ¥è¨­å®š
   - å®Ÿè£…: â—¯/â–³/âœ—ãƒœã‚¿ãƒ³

#### Phase D: ãƒšãƒ¼ã‚¸çµ±åˆ

8. **`app/my-register/page.tsx`**
   - çµ±åˆãƒ†ã‚¹ãƒˆ: å…¨ä½“ãƒ•ãƒ­ãƒ¼ï¼ˆã‚°ãƒ«ãƒ¼ãƒ—é¸æŠâ†’ã‚¤ãƒ™ãƒ³ãƒˆé¸æŠâ†’ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¨­å®šâ†’ç™»éŒ²ï¼‰
   - å®Ÿè£…: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ„ã¿åˆã‚ã›ã€çŠ¶æ…‹ç®¡ç†

9. **ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ **
   - `app/page.tsx`ã«ã€Œè¤‡æ•°ã‚¤ãƒ™ãƒ³ãƒˆã®å‡ºæ¬ ã‚’ç™»éŒ²ã€ãƒœã‚¿ãƒ³è¿½åŠ 
   - `app/admin/page.tsx`ã«åŒæ§˜ã®ãƒªãƒ³ã‚¯è¿½åŠ 

---

## 3. Testingï¼ˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼‰

### 3.1 å˜ä½“ãƒ†ã‚¹ãƒˆ

```bash
# å…¨ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm test

# ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿å®Ÿè¡Œ
npm test -- attendance-service.test.ts

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´æ™‚ã«è‡ªå‹•å†å®Ÿè¡Œï¼‰
npm test -- --watch

# ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š
npm test -- --coverage

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§è¡¨ç¤º
open coverage/lcov-report/index.html
```

**ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™**:
- ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆ`lib/attendance-service.ts`ï¼‰: 80%ä»¥ä¸Š
- UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: 60%ä»¥ä¸Š
- å…¨ä½“: 70%ä»¥ä¸Š

### 3.2 ãƒ†ã‚¹ãƒˆã®æ›¸ãæ–¹ï¼ˆä¾‹: upsertAttendanceï¼‰

```typescript
// __tests__/lib/attendance-service.test.ts

import { upsertAttendance, loadAttendances } from '@/lib/attendance-service';
import { clearAllData } from '@/lib/storage';

describe('upsertAttendance', () => {
  beforeEach(() => {
    // å„ãƒ†ã‚¹ãƒˆå‰ã«localStorageã‚’ã‚¯ãƒªã‚¢
    clearAllData();
  });

  test('æ–°è¦ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã™ã‚‹', () => {
    // Red: ã¾ãšæœŸå¾…ã™ã‚‹å‹•ä½œã‚’å®šç¾©
    const input = {
      eventDateId: 'event-1',
      memberId: 'member-1',
      status: 'â—¯' as const,
    };

    const result = upsertAttendance(input);

    // Assertionï¼ˆæ¤œè¨¼ï¼‰
    expect(result.id).toBeDefined();
    expect(result.eventDateId).toBe('event-1');
    expect(result.memberId).toBe('member-1');
    expect(result.status).toBe('â—¯');
    expect(result.createdAt).toBeDefined();

    // localStorageã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
    const attendances = loadAttendances();
    expect(attendances).toHaveLength(1);
    expect(attendances[0].id).toBe(result.id);
  });

  test('æ—¢å­˜ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æ›´æ–°ã™ã‚‹', () => {
    // 1å›ç›®: æ–°è¦ä½œæˆ
    const first = upsertAttendance({
      eventDateId: 'event-1',
      memberId: 'member-1',
      status: 'â—¯' as const,
    });

    // 2å›ç›®: åŒã˜eventDateIdã¨memberIdã§æ›´æ–°
    const second = upsertAttendance({
      eventDateId: 'event-1',
      memberId: 'member-1',
      status: 'âœ—' as const,
    });

    // Assertion
    expect(second.id).toBe(first.id); // IDã¯åŒã˜
    expect(second.status).toBe('âœ—'); // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¯æ›´æ–°
    expect(second.createdAt).toBe(first.createdAt); // createdAtã¯å¤‰ã‚ã‚‰ãªã„

    // localStorageã«ã¯1ä»¶ã®ã¿ï¼ˆé‡è¤‡ãªã—ï¼‰
    const attendances = loadAttendances();
    expect(attendances).toHaveLength(1);
  });
});
```

---

## 4. Manual Testingï¼ˆæ‰‹å‹•ãƒ†ã‚¹ãƒˆï¼‰

è‡ªå‹•ãƒ†ã‚¹ãƒˆã§ã‚«ãƒãƒ¼ã§ããªã„éƒ¨åˆ†ï¼ˆãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ï¼‰ã‚’æ‰‹å‹•ã§ç¢ºèª:

### 4.1 é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•

```bash
npm run dev
```

### 4.2 ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª

#### ã‚·ãƒŠãƒªã‚ª1: æ–°è¦ãƒ¡ãƒ³ãƒãƒ¼ã®ä¸€æ‹¬ç™»éŒ²

1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:3000/my-register` ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã‚°ãƒ«ãƒ¼ãƒ—ã‚’é¸æŠï¼ˆä¾‹: ã€Œãƒˆãƒ©ãƒ³ãƒšãƒƒãƒˆã€ï¼‰
3. ã€Œæ–°ã—ã„ãƒ¡ãƒ³ãƒãƒ¼ã‚’ä½œæˆã€ã‚’é¸æŠã—ã€åå‰ã‚’å…¥åŠ›ï¼ˆä¾‹: ã€Œç”°ä¸­å¤ªéƒã€ï¼‰
4. ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ã‹ã‚‰3ã¤ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’é¸æŠ
5. å„ã‚¤ãƒ™ãƒ³ãƒˆã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’è¨­å®šï¼ˆâ—¯ã€â–³ã€âœ—ï¼‰
6. ã€Œä¸€æ‹¬ç™»éŒ²ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
7. æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€Œ3ä»¶ç™»éŒ²ã—ã¾ã—ãŸã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
8. ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ãƒšãƒ¼ã‚¸ï¼ˆ`/events/{id}`ï¼‰ã§å‡ºæ¬ ãŒæ­£ã—ãç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

#### ã‚·ãƒŠãƒªã‚ª2: æ—¢å­˜å‡ºæ¬ ã®æ›´æ–°

1. æ—¢ã«å‡ºæ¬ ç™»éŒ²æ¸ˆã¿ã®ãƒ¡ãƒ³ãƒãƒ¼ã§`/my-register`ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã‚°ãƒ«ãƒ¼ãƒ—ã¨ãƒ¡ãƒ³ãƒãƒ¼ã‚’é¸æŠ
3. æ—¢å­˜ç™»éŒ²ã®ã‚ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œã€ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆä¾‹: ã€Œæ—¢å­˜: â—¯ã€ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
4. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å¤‰æ›´ï¼ˆä¾‹: â—¯ â†’ âœ—ï¼‰
5. ã€Œä¸€æ‹¬ç™»éŒ²ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
6. æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€Œ1ä»¶ç™»éŒ²ï¼ˆã†ã¡1ä»¶æ›´æ–°ï¼‰ã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
7. ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ãƒšãƒ¼ã‚¸ã§ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

#### ã‚·ãƒŠãƒªã‚ª3: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

1. ã‚°ãƒ«ãƒ¼ãƒ—ã‚’é¸æŠã›ãšã«ã€Œä¸€æ‹¬ç™»éŒ²ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€Œã‚°ãƒ«ãƒ¼ãƒ—ã‚’é¸æŠã—ã¦ãã ã•ã„ã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
3. ã‚¤ãƒ™ãƒ³ãƒˆã‚’1ã¤ã‚‚é¸æŠã›ãšã«ç™»éŒ²ã‚’è©¦ã¿ã‚‹
4. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€Œç™»éŒ²ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’é¸æŠã—ã¦ãã ã•ã„ã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

### 4.3 ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ†ã‚¹ãƒˆ

**ãƒ¢ãƒã‚¤ãƒ«ï¼ˆ320pxï¼‰**:
```bash
# Chrome DevToolsã§ç¢ºèª
# 1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ `/my-register` ã‚’é–‹ã
# 2. DevToolsï¼ˆF12ï¼‰ã‚’é–‹ã
# 3. ãƒ‡ãƒã‚¤ã‚¹ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ï¼ˆCtrl+Shift+Mï¼‰ã‚’æœ‰åŠ¹åŒ–
# 4. 320pxå¹…ã«è¨­å®š
# 5. ã™ã¹ã¦ã®UIè¦ç´ ãŒè¡¨ç¤ºã•ã‚Œã€æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãŒãªã„ã“ã¨ã‚’ç¢ºèª
```

**ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆï¼ˆ768pxï¼‰**:
- 2ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«ãªã‚‹ã“ã¨ã‚’ç¢ºèª

**ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ï¼ˆ1024pxä»¥ä¸Šï¼‰**:
- 3ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«ãªã‚‹ã“ã¨ã‚’ç¢ºèª

### 4.4 ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

**ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³**:
- Tabã‚­ãƒ¼ã§ã™ã¹ã¦ã®è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯èƒ½
- Enterã‚­ãƒ¼ã§ãƒœã‚¿ãƒ³æ“ä½œå¯èƒ½
- Spaceã‚­ãƒ¼ã§ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹æ“ä½œå¯èƒ½

**ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼**ï¼ˆVoiceOver on macOSã¾ãŸã¯NVDA on Windowsï¼‰:
```bash
# macOS VoiceOver
# Cmd + F5 ã§VoiceOverã‚’èµ·å‹•
# ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã€ãƒœã‚¿ãƒ³ã€ãƒ©ãƒ™ãƒ«ãŒæ­£ã—ãèª­ã¿ä¸Šã’ã‚‰ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
```

---

## 5. Build & Lintï¼ˆãƒ“ãƒ«ãƒ‰ã¨ãƒªãƒ³ãƒˆï¼‰

### 5.1 TypeScriptå‹ãƒã‚§ãƒƒã‚¯

```bash
# å‹ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨ã‚’ç¢ºèª
npx tsc --noEmit

# ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Œã°ä¿®æ­£ï¼ˆstrict modeå¿…é ˆï¼‰
```

### 5.2 ESLint

```bash
# ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°å®Ÿè¡Œ
npm run lint

# è‡ªå‹•ä¿®æ­£å¯èƒ½ãªã‚¨ãƒ©ãƒ¼ã‚’ä¿®æ­£
npm run lint -- --fix
```

### 5.3 ãƒ“ãƒ«ãƒ‰

```bash
# ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰
npm run build

# ãƒ“ãƒ«ãƒ‰æˆåŠŸã‚’ç¢ºèªï¼ˆã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨ï¼‰
```

**ãƒ“ãƒ«ãƒ‰æˆåŠŸã®ä¾‹**:
```
âœ“ Compiled successfully
âœ“ Linting and checking validity of types
âœ“ Collecting page data
âœ“ Generating static pages (5/5)
âœ“ Finalizing page optimization

Route (app)                              Size     First Load JS
â”Œ â—‹ /                                    1.2 kB         85 kB
â”œ â—‹ /my-register                         2.5 kB         95 kB  â† æ–°è¦ãƒšãƒ¼ã‚¸
â”” ...
```

---

## 6. Debuggingï¼ˆãƒ‡ãƒãƒƒã‚°ï¼‰

### 6.1 ãƒ–ãƒ©ã‚¦ã‚¶ DevTools

```javascript
// ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§localStorageã‚’ç¢ºèª
localStorage.getItem('attendance_attendances');

// JSONå½¢å¼ã§è¡¨ç¤º
JSON.parse(localStorage.getItem('attendance_attendances'));

// ã‚¯ãƒªã‚¢ï¼ˆãƒ†ã‚¹ãƒˆãƒªã‚»ãƒƒãƒˆï¼‰
localStorage.clear();
```

### 6.2 VS Code ãƒ‡ãƒãƒƒã‚¬ãƒ¼

`.vscode/launch.json`ã‚’ä½œæˆï¼ˆNext.jsãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰:

```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Next.js: debug server-side",
      "type": "node-terminal",
      "request": "launch",
      "command": "npm run dev"
    },
    {
      "name": "Next.js: debug client-side",
      "type": "chrome",
      "request": "launch",
      "url": "http://localhost:3000"
    }
  ]
}
```

ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®šã—ã¦å®Ÿè¡Œ:
1. VS Codeã§F5ã‚­ãƒ¼ã‚’æŠ¼ã™
2. ã‚³ãƒ¼ãƒ‰å†…ã®ä»»æ„ã®è¡Œã«ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®š
3. ãƒ–ãƒ©ã‚¦ã‚¶ã§è©²å½“ãƒšãƒ¼ã‚¸ã‚’æ“ä½œ
4. ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã§åœæ­¢ã—ã€å¤‰æ•°ã‚’ç¢ºèª

---

## 7. Performance Testingï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼‰

### 7.1 ä¸€æ‹¬ç™»éŒ²ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š

```typescript
// app/my-register/page.tsxï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼‰

const handleSubmit = () => {
  const start = performance.now();

  const result = upsertBulkAttendances(selectedEvents);

  const end = performance.now();
  const duration = end - start;

  console.log(`ä¸€æ‹¬ç™»éŒ²å‡¦ç†æ™‚é–“: ${duration.toFixed(2)}ms`);
  console.log(`ç™»éŒ²ä»¶æ•°: ${selectedEvents.length}ä»¶`);
  console.log(`1ä»¶ã‚ãŸã‚Š: ${(duration / selectedEvents.length).toFixed(2)}ms`);
};
```

**ç›®æ¨™å€¤**:
- 10ã‚¤ãƒ™ãƒ³ãƒˆ: 100msä»¥ä¸‹
- 50ã‚¤ãƒ™ãƒ³ãƒˆ: 500msä»¥ä¸‹

### 7.2 Lighthouse Performance Score

```bash
# ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰
npm run build

# ãƒ“ãƒ«ãƒ‰å¾Œã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚µãƒ¼ãƒ–
npm start

# Chrome DevTools > Lighthouse
# ãƒšãƒ¼ã‚¸: /my-register
# Mode: Desktop
# Categories: Performance ã®ã¿

# ç›®æ¨™: 90ä»¥ä¸Š
```

---

## 8. Cleanup & Commitï¼ˆã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã¨ã‚³ãƒŸãƒƒãƒˆï¼‰

### 8.1 ãƒ†ã‚¹ãƒˆã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

```bash
# ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã“ã¨ã‚’ç¢ºèª
npm test

# ã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèª
npm test -- --coverage
```

### 8.2 ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```bash
# Prettierï¼ˆãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ï¼‰ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å ´åˆ
npx prettier --write "**/*.{ts,tsx,js,jsx,json,md}"
```

### 8.3 Git Commit

```bash
# å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª
git status

# æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ã¨å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°
git add app/my-register/
git add lib/attendance-service.ts
git add types/index.ts
git add components/bulk-register/
git add __tests__/

# ã‚³ãƒŸãƒƒãƒˆï¼ˆæ—¥æœ¬èªã¾ãŸã¯è‹±èªï¼‰
git commit -m "feat: è¤‡æ•°ã‚¤ãƒ™ãƒ³ãƒˆä¸€æ‹¬å‡ºæ¬ ç™»éŒ²æ©Ÿèƒ½ã‚’å®Ÿè£…

- upsertAttendance, upsertBulkAttendances é–¢æ•°ã‚’è¿½åŠ 
- /my-register ãƒšãƒ¼ã‚¸ã‚’æ–°è¦ä½œæˆ
- é‡è¤‡ç™»éŒ²ãƒã‚°ã‚’ä¿®æ­£ï¼ˆupsertã«ã‚ˆã‚‹ä¸€æ„æ€§ä¿è¨¼ï¼‰
- TDDã«åŸºã¥ãã€å…¨æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Šã§å®Ÿè£…"

# ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆGitHubï¼‰
git push origin 004-bulk-attendance-register
```

---

## 9. Next Stepsï¼ˆæ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼‰

### 9.1 ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆä½œæˆ

```bash
# GitHub CLIã‚’ä½¿ç”¨ï¼ˆã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã®å ´åˆï¼‰
gh pr create --title "è¤‡æ•°ã‚¤ãƒ™ãƒ³ãƒˆä¸€æ‹¬å‡ºæ¬ ç™»éŒ²æ©Ÿèƒ½" --body "$(cat <<EOF
## æ¦‚è¦
ãƒ¡ãƒ³ãƒãƒ¼ãŒè‡ªåˆ†ã®å‡ºæ¬ ã‚’è¤‡æ•°ã‚¤ãƒ™ãƒ³ãƒˆã«ä¸€æ‹¬ã§ç™»éŒ²ãƒ»æ›´æ–°ã§ãã‚‹æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚

## å¤‰æ›´å†…å®¹
- æ–°è¦ãƒšãƒ¼ã‚¸: /my-register
- ã‚µãƒ¼ãƒ“ã‚¹å±¤: upsertAttendance, upsertBulkAttendances é–¢æ•°
- é‡è¤‡ç™»éŒ²ãƒã‚°ä¿®æ­£
- TDDã«åŸºã¥ãå®Ÿè£…ï¼ˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Šï¼‰

## ãƒ†ã‚¹ãƒˆ
- å˜ä½“ãƒ†ã‚¹ãƒˆ: 44ä»¶ pass
- ãƒ“ãƒ«ãƒ‰: æˆåŠŸ
- Lighthouse Performance: 90+

## ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®å½±ã—ã¦æ·»ä»˜ï¼‰
EOF
)"
```

### 9.2 ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼

- ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä¾é ¼
- CIãŒæˆåŠŸã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆGitHub Actionsï¼‰

### 9.3 ãƒãƒ¼ã‚¸å¾Œã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

```bash
# PRãŒãƒãƒ¼ã‚¸ã•ã‚ŒãŸã‚‰ã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒ–ãƒ©ãƒ³ãƒã‚’å‰Šé™¤
git checkout main
git pull origin main
git branch -d 004-bulk-attendance-register
```

---

## 10. Troubleshootingï¼ˆãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼‰

### å•é¡Œ1: ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹

```bash
# localStorageã®ãƒ¢ãƒƒã‚¯ãŒæ­£ã—ãå‹•ä½œã—ã¦ã„ã‚‹ã‹ç¢ºèª
# jest.setup.js ã«ä»¥ä¸‹ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª:

class LocalStorageMock {
  constructor() {
    this.store = {};
  }
  getItem(key) {
    return this.store[key] || null;
  }
  setItem(key, value) {
    this.store[key] = value.toString();
  }
  clear() {
    this.store = {};
  }
}

global.localStorage = new LocalStorageMock();
```

### å•é¡Œ2: ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼

```bash
# node_modulesã‚’å‰Šé™¤ã—ã¦å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
rm -rf node_modules
npm install

# .next ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã‚¯ãƒªã‚¢
rm -rf .next
npm run build
```

### å•é¡Œ3: å‹ã‚¨ãƒ©ãƒ¼

```bash
# TypeScriptãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèª
npx tsc --version

# strict modeãŒæœ‰åŠ¹ã‹ç¢ºèª
grep "strict" tsconfig.json
# å‡ºåŠ›: "strict": true,

# å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†ç”Ÿæˆï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
npx tsc --noEmit
```

---

## Summaryï¼ˆã¾ã¨ã‚ï¼‰

æœ¬ã‚¬ã‚¤ãƒ‰ã«å¾“ã†ã“ã¨ã§ã€ä»¥ä¸‹ã‚’é”æˆã§ãã‚‹:

âœ… ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
âœ… TDDã‚µã‚¤ã‚¯ãƒ«ã«åŸºã¥ãé–‹ç™º
âœ… å˜ä½“ãƒ†ã‚¹ãƒˆãƒ»æ‰‹å‹•ãƒ†ã‚¹ãƒˆãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
âœ… ãƒ“ãƒ«ãƒ‰ãƒ»ãƒªãƒ³ãƒˆãƒ»å‹ãƒã‚§ãƒƒã‚¯
âœ… ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆä½œæˆ

**æ¨å¥¨é–‹ç™ºæ™‚é–“**: 8ã€œ12æ™‚é–“ï¼ˆãƒ†ã‚¹ãƒˆå«ã‚€ï¼‰

**è³ªå•ãƒ»å•é¡ŒãŒã‚ã‚Œã°**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®Issueã€ã¾ãŸã¯ãƒãƒ¼ãƒ Slackã§è³ªå•ã—ã¦ãã ã•ã„ã€‚

Happy Coding! ğŸš€
